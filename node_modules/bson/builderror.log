In file included from ../ext/bson.h:17:0,
                 from ../ext/bson.cc:36:
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Signature> NanNew(v8::Handle<v8::FunctionTemplate>, int, v8::Handle<v8::FunctionTemplate>*)’:
../node_modules/nan/nan.h:342:78: error: no matching function for call to ‘v8::Signature::New(v8::Isolate*, v8::Handle<v8::FunctionTemplate>&, int&, v8::Handle<v8::FunctionTemplate>*&)’
     return v8::Signature::New(v8::Isolate::GetCurrent(), receiver, argc, argv);
                                                                              ^
../node_modules/nan/nan.h:342:78: note: candidate is:
In file included from ../ext/bson.cc:14:0:
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:4674:27: note: static v8::Local<v8::Signature> v8::Signature::New(v8::Isolate*, v8::Local<v8::FunctionTemplate>)
   static Local<Signature> New(
                           ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:4674:27: note:   candidate expects 2 arguments, 4 provided
In file included from ../ext/bson.h:17:0,
                 from ../ext/bson.cc:36:
../node_modules/nan/nan.h: At global scope:
../node_modules/nan/nan.h:424:3: error: redefinition of ‘v8::Local<T> NanNew(P) [with T = v8::StringObject; P = v8::Local<v8::String>]’
   NanNew<v8::StringObject, v8::Handle<v8::String> >(
   ^
../node_modules/nan/nan.h:417:3: note: ‘v8::Local<T> NanNew(P) [with T = v8::StringObject; P = v8::Local<v8::String>]’ previously declared here
   NanNew<v8::StringObject, v8::Local<v8::String> >(
   ^
../node_modules/nan/nan.h:442:36: error: redefinition of ‘template<class T> v8::Local<v8::RegExp> NanNew(v8::Local<v8::String>, v8::RegExp::Flags)’
   NAN_INLINE v8::Local<v8::RegExp> NanNew(
                                    ^
../node_modules/nan/nan.h:436:36: note: ‘template<class T> v8::Local<v8::RegExp> NanNew(v8::Handle<v8::String>, v8::RegExp::Flags)’ previously declared here
   NAN_INLINE v8::Local<v8::RegExp> NanNew(
                                    ^
../node_modules/nan/nan.h:454:36: error: redefinition of ‘template<class T, class P> v8::Local<v8::RegExp> NanNew(v8::Local<v8::String>, v8::RegExp::Flags)’
   NAN_INLINE v8::Local<v8::RegExp> NanNew(
                                    ^
../node_modules/nan/nan.h:448:36: note: ‘template<class T, class P> v8::Local<v8::RegExp> NanNew(v8::Handle<v8::String>, v8::RegExp::Flags)’ previously declared here
   NAN_INLINE v8::Local<v8::RegExp> NanNew(
                                    ^
../node_modules/nan/nan.h:623:19: error: ‘NanNew’ declared as an ‘inline’ variable
       v8::String::ExternalAsciiStringResource *resource) {
                   ^
../node_modules/nan/nan.h:623:19: warning: ‘always_inline’ attribute ignored [-Wattributes]
../node_modules/nan/nan.h:623:19: error: ‘v8::Local<v8::String> NanNew’ redeclared as different kind of symbol
../node_modules/nan/nan.h:617:36: note: previous declaration ‘v8::Local<v8::String> NanNew(v8::String::ExternalStringResource*)’
   NAN_INLINE v8::Local<v8::String> NanNew(
                                    ^
../node_modules/nan/nan.h:623:7: error: ‘ExternalAsciiStringResource’ is not a member of ‘v8::String’
       v8::String::ExternalAsciiStringResource *resource) {
       ^
../node_modules/nan/nan.h:623:48: error: ‘resource’ was not declared in this scope
       v8::String::ExternalAsciiStringResource *resource) {
                                                ^
../node_modules/nan/nan.h:637:27: error: redefinition of ‘template<class T> v8::Local<T> _NanEscapeScopeHelper(v8::Local<T>)’
   NAN_INLINE v8::Local<T> _NanEscapeScopeHelper(v8::Local<T> val) {
                           ^
../node_modules/nan/nan.h:632:27: note: ‘template<class T> v8::Local<T> _NanEscapeScopeHelper(v8::Handle<T>)’ previously declared here
   NAN_INLINE v8::Local<T> _NanEscapeScopeHelper(v8::Handle<T> val) {
                           ^
../node_modules/nan/nan.h:889:13: error: ‘node::smalloc’ has not been declared
     , node::smalloc::FreeCallback callback
             ^
../node_modules/nan/nan.h:889:35: error: expected ‘,’ or ‘...’ before ‘callback’
     , node::smalloc::FreeCallback callback
                                   ^
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Object> NanNewBufferHandle(char*, size_t, int)’:
../node_modules/nan/nan.h:893:50: error: ‘callback’ was not declared in this scope
         v8::Isolate::GetCurrent(), data, length, callback, hint);
                                                  ^
../node_modules/nan/nan.h:893:60: error: ‘hint’ was not declared in this scope
         v8::Isolate::GetCurrent(), data, length, callback, hint);
                                                            ^
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Object> NanNewBufferHandle(const char*, uint32_t)’:
../node_modules/nan/nan.h:900:67: error: call of overloaded ‘New(v8::Isolate*, const char*&, uint32_t&)’ is ambiguous
     return node::Buffer::New(v8::Isolate::GetCurrent(), data, size);
                                                                   ^
../node_modules/nan/nan.h:900:67: note: candidates are:
In file included from ../ext/bson.cc:24:0:
/home/ayoub/.node-gyp/5.8.0/include/node/node_buffer.h:31:40: note: v8::MaybeLocal<v8::Object> node::Buffer::New(v8::Isolate*, v8::Local<v8::String>, node::encoding) <near match>
 NODE_EXTERN v8::MaybeLocal<v8::Object> New(v8::Isolate* isolate,
                                        ^
/home/ayoub/.node-gyp/5.8.0/include/node/node_buffer.h:31:40: note:   no known conversion for argument 3 from ‘uint32_t {aka unsigned int}’ to ‘node::encoding’
/home/ayoub/.node-gyp/5.8.0/include/node/node_buffer.h:43:40: note: v8::MaybeLocal<v8::Object> node::Buffer::New(v8::Isolate*, char*, size_t) <near match>
 NODE_EXTERN v8::MaybeLocal<v8::Object> New(v8::Isolate* isolate,
                                        ^
/home/ayoub/.node-gyp/5.8.0/include/node/node_buffer.h:43:40: note:   no known conversion for argument 2 from ‘const char*’ to ‘char*’
In file included from ../ext/bson.h:17:0,
                 from ../ext/bson.cc:36:
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Object> NanNewBufferHandle(uint32_t)’:
../node_modules/nan/nan.h:904:61: error: could not convert ‘node::Buffer::New(v8::Isolate::GetCurrent(), ((size_t)size))’ from ‘v8::MaybeLocal<v8::Object>’ to ‘v8::Local<v8::Object>’
     return node::Buffer::New(v8::Isolate::GetCurrent(), size);
                                                             ^
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Object> NanBufferUse(char*, uint32_t)’:
../node_modules/nan/nan.h:911:12: error: ‘Use’ is not a member of ‘node::Buffer’
     return node::Buffer::Use(v8::Isolate::GetCurrent(), data, size);
            ^
../node_modules/nan/nan.h: In function ‘bool _NanGetExternalParts(v8::Handle<v8::Value>, const char**, size_t*)’:
../node_modules/nan/nan.h:1993:12: error: ‘class v8::String’ has no member named ‘IsExternalAscii’
   if (str->IsExternalAscii()) {
            ^
../node_modules/nan/nan.h:1994:23: error: ‘ExternalAsciiStringResource’ in ‘class v8::String’ does not name a type
     const v8::String::ExternalAsciiStringResource* ext;
                       ^
../node_modules/nan/nan.h:1995:5: error: ‘ext’ was not declared in this scope
     ext = str->GetExternalAsciiStringResource();
     ^
../node_modules/nan/nan.h:1995:16: error: ‘class v8::String’ has no member named ‘GetExternalAsciiStringResource’
     ext = str->GetExternalAsciiStringResource();
                ^
../ext/bson.cc: In member function ‘void BSONSerializer<T>::SerializeValue(void*, v8::Handle<v8::Value>&)’:
../ext/bson.cc:229:78: error: no matching function for call to ‘v8::Object::Get(v8::Persistent<v8::String, v8::NonCopyablePersistentTraits<v8::String> >&)’
    const Local<String>& constructorString = object->Get(bson->_bsontypeString)->ToString();
                                                                              ^
../ext/bson.cc:229:78: note: candidates are:
In file included from /home/ayoub/.node-gyp/5.8.0/include/node/v8.h:23:0,
                 from ../ext/bson.cc:14:
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2636:55: note: v8::Local<v8::Value> v8::Object::Get(v8::Local<v8::Value>)
   V8_DEPRECATE_SOON("Use maybe version", Local<Value> Get(Local<Value> key));
                                                       ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8config.h:347:48: note: in definition of macro ‘V8_DEPRECATE_SOON’
 #define V8_DEPRECATE_SOON(message, declarator) declarator
                                                ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2636:55: note:   no known conversion for argument 1 from ‘v8::Persistent<v8::String, v8::NonCopyablePersistentTraits<v8::String> >’ to ‘v8::Local<v8::Value>’
   V8_DEPRECATE_SOON("Use maybe version", Local<Value> Get(Local<Value> key));
                                                       ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8config.h:347:48: note: in definition of macro ‘V8_DEPRECATE_SOON’
 #define V8_DEPRECATE_SOON(message, declarator) declarator
                                                ^
In file included from ../ext/bson.cc:14:0:
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2637:43: note: v8::MaybeLocal<v8::Value> v8::Object::Get(v8::Local<v8::Context>, v8::Local<v8::Value>)
   V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                           ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2637:43: note:   candidate expects 2 arguments, 1 provided
In file included from /home/ayoub/.node-gyp/5.8.0/include/node/v8.h:23:0,
                 from ../ext/bson.cc:14:
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2640:55: note: v8::Local<v8::Value> v8::Object::Get(uint32_t)
   V8_DEPRECATE_SOON("Use maybe version", Local<Value> Get(uint32_t index));
                                                       ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8config.h:347:48: note: in definition of macro ‘V8_DEPRECATE_SOON’
 #define V8_DEPRECATE_SOON(message, declarator) declarator
                                                ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2640:55: note:   no known conversion for argument 1 from ‘v8::Persistent<v8::String, v8::NonCopyablePersistentTraits<v8::String> >’ to ‘uint32_t {aka unsigned int}’
   V8_DEPRECATE_SOON("Use maybe version", Local<Value> Get(uint32_t index));
                                                       ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8config.h:347:48: note: in definition of macro ‘V8_DEPRECATE_SOON’
 #define V8_DEPRECATE_SOON(message, declarator) declarator
                                                ^
In file included from ../ext/bson.cc:14:0:
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2641:43: note: v8::MaybeLocal<v8::Value> v8::Object::Get(v8::Local<v8::Context>, uint32_t)
   V8_WARN_UNUSED_RESULT MaybeLocal<Value> Get(Local<Context> context,
                                           ^
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:2641:43: note:   candidate expects 2 arguments, 1 provided
../ext/bson.cc: In static member function ‘static void BSON::BSONDeserialize(const v8::FunctionCallbackInfo<v8::Value>&)’:
../ext/bson.cc:824:44: warning: ‘ssize_t node::DecodeBytes(v8::Local<v8::Value>, node::encoding)’ is deprecated (declared at /home/ayoub/.node-gyp/5.8.0/include/node/node.h:317): Use DecodeBytes(isolate, ...) [-Wdeprecated-declarations]
   ssize_t len = DecodeBytes(args[0], BINARY);
                                            ^
../ext/bson.cc:832:41: warning: ‘ssize_t node::DecodeWrite(char*, size_t, v8::Local<v8::Value>, node::encoding)’ is deprecated (declared at /home/ayoub/.node-gyp/5.8.0/include/node/node.h:330): Use DecodeWrite(isolate, ...) [-Wdeprecated-declarations]
   DecodeWrite(data, len, args[0], BINARY);
                                         ^
../ext/bson.cc: In static member function ‘static void BSON::BSONSerialize(const v8::FunctionCallbackInfo<v8::Value>&)’:
../ext/bson.cc:927:73: warning: ‘v8::Local<v8::Value> node::Encode(const void*, size_t, node::encoding)’ is deprecated (declared at /home/ayoub/.node-gyp/5.8.0/include/node/node.h:298): Use Encode(isolate, ...) [-Wdeprecated-declarations]
   Local<Value> bin_value = Encode(serialized_object, object_size, BINARY)->ToString();
                                                                         ^
In file included from ../ext/bson.cc:14:0:
../ext/bson.cc: In instantiation of ‘void BSONSerializer<T>::SerializeValue(void*, v8::Handle<v8::Value>&) [with T = CountStream; v8::Handle<v8::Value> = v8::Local<v8::Value>]’:
../ext/bson.cc:123:46:   required from ‘void BSONSerializer<T>::SerializeDocument(v8::Handle<v8::Value>&) [with T = CountStream; v8::Handle<v8::Value> = v8::Local<v8::Value>]’
../ext/bson.cc:898:35:   required from here
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:326:13: error: ‘v8::Local<T>::Local(S*) [with S = v8::Value; T = v8::Value]’ is private
   V8_INLINE Local(S* that)
             ^
../ext/bson.cc:154:24: error: within this context
  Local<Value> value = *constValue;
                        ^
In file included from ../ext/bson.cc:14:0:
../ext/bson.cc: In instantiation of ‘void BSONSerializer<T>::SerializeValue(void*, v8::Handle<v8::Value>&) [with T = DataStream; v8::Handle<v8::Value> = v8::Local<v8::Value>]’:
../ext/bson.cc:123:46:   required from ‘void BSONSerializer<T>::SerializeDocument(v8::Handle<v8::Value>&) [with T = DataStream; v8::Handle<v8::Value> = v8::Local<v8::Value>]’
../ext/bson.cc:908:32:   required from here
/home/ayoub/.node-gyp/5.8.0/include/node/v8.h:326:13: error: ‘v8::Local<T>::Local(S*) [with S = v8::Value; T = v8::Value]’ is private
   V8_INLINE Local(S* that)
             ^
../ext/bson.cc:154:24: error: within this context
  Local<Value> value = *constValue;
                        ^
In file included from ../ext/bson.h:17:0,
                 from ../ext/bson.cc:36:
../node_modules/nan/nan.h: In function ‘v8::Local<v8::Object> NanNewBufferHandle(const char*, uint32_t)’:
../node_modules/nan/nan.h:901:3: warning: control reaches end of non-void function [-Wreturn-type]
   }
   ^
make: *** [Release/obj.target/bson/ext/bson.o] Error 1
gyp ERR! build error 
gyp ERR! stack Error: `make` failed with exit code: 2
gyp ERR! stack     at ChildProcess.onExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
gyp ERR! stack     at emitTwo (events.js:100:13)
gyp ERR! stack     at ChildProcess.emit (events.js:185:7)
gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:204:12)
gyp ERR! System Linux 3.19.0-26-generic
gyp ERR! command "/usr/local/bin/node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /home/ayoub/Documents/stm/node_modules/bson
gyp ERR! node -v v5.8.0
gyp ERR! node-gyp -v v3.2.1
gyp ERR! not ok 
