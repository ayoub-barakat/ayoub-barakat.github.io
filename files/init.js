/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

define("libs/dyb/analytics-tracker",[],function(){"use strict";return{trackEvent:function(t,e,n){console.log("["+t.toUpperCase()+"] action: "+e+" | label: "+n),window._gaq.push(["dyb._trackEvent",t,e,n])},trackTransaction:function(t,e,n){var i=t.amount-t.discountAmount,a=i*(t.taxRate/100);window._gaq.push(["dyb._set","currencyCode",n]),window._gaq.push(["dyb._addTrans",t.id,"",i-a,a,"0","","",t.locale]);for(var o in e){var r=e[o],c=r.price-r.discountAmount-r.price*(t.taxRate/100);window._gaq.push(["dyb._addItem",r.id,"PREMIUM_"+t.locale.toUpperCase()+"_"+r.product.duration+r.product.durationUnit,"Premium "+r.product.duration+r.product.durationUnit+" - "+t.locale.toUpperCase(),"Premium",c,1])}window._gaq.push(["dyb._trackTrans"])},trackUserEvent:function(t,e){this.trackEvent("user",t,e)},trackHelpCampaignEvent:function(t,e){this.trackEvent("help-campaign",t,e)},trackProofreaderEvent:function(t,e){this.trackEvent("proofreader",t,e)},trackCvVisitorEvent:function(t,e){this.trackEvent("cv-visitor",t,e)},trackPromoEvent:function(t,e){this.trackEvent("promo",t,e)},trackTipsEvent:function(t,e){this.trackEvent("tips",t,e)},addVar:function(t,e,n,i){window._gaq.push(["dyb._setCustomVar",t,e,n,i])}}}),define("libs/dyb/compiler",[],function(){"use strict";return function(t,e){var n,i;for(n in t)t.hasOwnProperty(n)&&(i=e.find(n),i.length>0&&t[n](i));return e}}),function(t){"use strict";"function"==typeof define&&define.amd?define("libs/dyb/calc",["jquery"],t):t(window.jQuery)}(function($){"use strict";$.fn.dybCalc=function(){var $this=$(this),expression=$this.data("calc")||$this.data("dybCalc"),cssAttributes={},computeSize=null,hasBeenResized=!1,i=null,currentTimeout=null,computeSelectorSize=function(t,e){var n,i=0;switch(t){case"parent":n=$this.parent();break;case"self":n=$this;break;case"window":n=$(window);break;default:n=-1!==t.indexOf("#")?$(t):-1!==t.indexOf("~")?$this.closest(t):$this.parent().find(t)}return n.each(function(t,n){i+="h"===e?$(n).outerHeight():$(n).outerWidth()}),i},generateExp=function(t){return t.replace(/\(([^)]+)\)/g,"__$1__").replace("window","__window__").replace("self","__self__").replace("%"," * 0.01 * __parent__").replace("px","")};if("string"==typeof expression)throw"the data-calc attribute is not a valid JSON : "+expression;for(i in expression)expression.hasOwnProperty(i)&&(cssAttributes[i]=generateExp(expression[i]));return computeSize=function(){var expr,cssAtt="",att,modifier,selectorComputeFn=function(t,e){return computeSelectorSize(e,modifier)};for(att in cssAttributes){var modifierExp=att.match(/\/(.)/);modifier=modifierExp?modifierExp[1]:null,modifier||(modifier=-1!==att.indexOf("eight")||-1!==att.indexOf("top")||-1!==att.indexOf("bottom")?"h":"w"),expr=cssAttributes[att].replace(/__([^_]+)__/g,selectorComputeFn),cssAtt=att.replace(/\/./,"").replace(/([A-Z])/g,"-$1").toLowerCase(),$this.css(cssAtt,eval(expr))}hasBeenResized=!0},$(document).on("globalLayoutModified",function(){hasBeenResized&&computeSize()}),$(window).resize(function(){currentTimeout&&window.clearTimeout(currentTimeout),currentTimeout=window.setTimeout(function(){hasBeenResized&&computeSize()},500)}),{resize:computeSize}}}),window.matchMedia=window.matchMedia||function(t){var e,n=t.documentElement,i=n.firstElementChild||n.firstChild,a=t.createElement("body"),o=t.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(o),function(t){return o.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(a,i),e=42==o.offsetWidth,n.removeChild(a),{matches:e,media:t}}}(document),function(t){function e(){g(!0)}if(t.respond={},respond.update=function(){},respond.mediaQueriesSupported=t.matchMedia&&t.matchMedia("only all").matches,!respond.mediaQueriesSupported){var n,i,a,o=t.document,r=o.documentElement,c=[],s=[],d=[],u={},l=30,p=o.getElementsByTagName("head")[0]||r,f=o.getElementsByTagName("base")[0],m=p.getElementsByTagName("link"),h=[],v=function(){for(var e,n,i,a,o=m,r=o.length,c=0;r>c;c++)e=o[c],n=e.href,i=e.media,a=e.rel&&"stylesheet"===e.rel.toLowerCase(),n&&a&&!u[n]&&(e.styleSheet&&e.styleSheet.rawCssText?(w(e.styleSheet.rawCssText,n,i),u[n]=!0):(!/^([a-zA-Z:]*\/\/)/.test(n)&&!f||n.replace(RegExp.$1,"").split("/")[0]===t.location.host)&&h.push({href:n,media:i}));b()},b=function(){if(h.length){var t=h.shift();k(t.href,function(e){w(e,t.href,t.media),u[t.href]=!0,setTimeout(function(){b()},0)})}},w=function(t,e,n){var i,a,o,r,d,u=t.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),l=u&&u.length||0,e=e.substring(0,e.lastIndexOf("/")),p=function(t){return t.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+e+"$2$3")},f=!l&&n,m=0;for(e.length&&(e+="/"),f&&(l=1);l>m;m++)for(i=0,f?(a=n,s.push(p(t))):(a=u[m].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,s.push(RegExp.$2&&p(RegExp.$2))),r=a.split(","),d=r.length;d>i;i++)o=r[i],c.push({media:o.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:s.length-1,hasquery:o.indexOf("(")>-1,minw:o.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:o.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")});g()},y=function(){var t,e=o.createElement("div"),n=o.body,i=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",n||(n=i=o.createElement("body"),n.style.background="none"),n.appendChild(e),r.insertBefore(n,r.firstChild),t=e.offsetWidth,i?r.removeChild(n):n.removeChild(e),t=a=parseFloat(t)},g=function(t){var e="clientWidth",u=r[e],f="CSS1Compat"===o.compatMode&&u||o.body[e]||u,h={},v=m[m.length-1],b=(new Date).getTime();if(t&&n&&l>b-n)return clearTimeout(i),void(i=setTimeout(g,l));n=b;for(var w in c){var k=c[w],x=k.minw,E=k.maxw,T=null===x,_=null===E,C="em";x&&(x=parseFloat(x)*(x.indexOf(C)>-1?a||y():1)),E&&(E=parseFloat(E)*(E.indexOf(C)>-1?a||y():1)),k.hasquery&&(T&&_||!(T||f>=x)||!(_||E>=f))||(h[k.media]||(h[k.media]=[]),h[k.media].push(s[k.rules]))}for(var w in d)d[w]&&d[w].parentNode===p&&p.removeChild(d[w]);for(var w in h){var $=o.createElement("style"),S=h[w].join("\n");$.type="text/css",$.media=w,p.insertBefore($,v.nextSibling),$.styleSheet?$.styleSheet.cssText=S:$.appendChild(o.createTextNode(S)),d.push($)}},k=function(t,e){var n=x();n&&(n.open("GET",t,!0),n.onreadystatechange=function(){4!=n.readyState||200!=n.status&&304!=n.status||e(n.responseText)},4!=n.readyState&&n.send(null))},x=function(){var t=!1;try{t=new XMLHttpRequest}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();v(),respond.update=v,t.addEventListener?t.addEventListener("resize",e,!1):t.attachEvent&&t.attachEvent("onresize",e)}}(this),define("libs/respond.min",function(){}),define("layout/init",["jquery","libs/dyb/analytics-tracker","libs/dyb/compiler","libs/dyb/calc","libs/respond.min"],function(t,e,n){"use strict";var i={"[data-dyb-calc]":function(e){require(["libs/dyb/calc"],function(){e.each(function(e,n){window.setTimeout(function(){t(n).dybCalc().resize()})})})},"[data-dyb-track-click]":function(n){n.click(function(n){var i=t(this),a=i.data("dybTrackClick"),o=i.data("dybTrackClickVar"),r=i.attr("href");return a.category=a.category||"cv-visitor","string"==typeof a?window.console&&window.console.error("data for dyb-track is not a valid json. Tracking is canceled"):(o&&e.addVar(o.index,o.name,o.value,o.scope),window.cvInfos&&(a.label=a.label.replace("%cvInfos.id%",window.cvInfos.id)),e.trackEvent(a.category,a.action,a.label),i.data("dybTrackCustom")&&window.customGa&&_gaq.push(["custom._trackEvent",a.category,a.action,a.label]),void(r&&(n.preventDefault(),window.setTimeout(function(){window.location=r}))))})},"[data-dyb-track-submit]":function(n){n.submit(function(){var n=t(this),i=n.data("dybTrackSubmit");return n.data("forceSubmit")?(n.data("forceSubmit",!1),!0):(e.trackCvVisitorEvent(i.action,i.label),window.setTimeout(function(){n.data("forceSubmit",!0),n.submit()},500),!1)})},"[data-dyb-track-transaction]":function(t){var n=t.data("dybTrackTransactionCurrency")||"EUR",i=t.data("dybTrackTransaction"),a=t.data("dybTrackTransactionProducts");e.trackTransaction(i,a,n)},"[data-flexheight]":function(e){function n(){var n=e.find("[data-flexheight-flex]");n.height("0");var i=t.makeArray(e).map(function(e){return t(e).height()}).reduce(function(t,e){return e>t?e:t},0);n.each(function(e,n){var a=i-t(n).parents("[data-flexheight]").height();t(n).height(a)})}n(),t(window).resize(function(){n()})},"[data-dyb-track-view]":function(n){n.each(function(n,i){var a=t(i),o=a.data("dybTrackView");!function r(){a.is(":visible")?e.trackUserEvent(o.action,o.label):window.setTimeout(r,1e3)}()})},"[data-dyb-track-promo]":function(n){n.each(function(n,i){var a=t(i),o=a.data("dybTrackPromo"),r="promo",c="view-"+o,s="hover-"+o,d="click-"+o;if(o){if(function l(){a.is(":visible")?e.trackPromoEvent("view",c):window.setTimeout(l,1e3)}(),a.data("dybTrackPromoHover")){var u=function(){e.trackPromoEvent("hover",s)};a.one("mouseover",u)}a.click(function(t){document.cookie="dyb_promo="+o+";path=/;domain="+location.host,e.addVar(4,r,d,2),e.trackPromoEvent("click",d),a.attr("href")&&"_blank"!==a.attr("target")&&(t.preventDefault(),window.setTimeout(function(){window.location=a.attr("href")},500))})}})},"[data-popover]":function(e){require(["libs/bootstrap/bootstrap.min"],function(){e.each(function(e,n){var i=t(n),a=i.data("html")?"<div>"+i.data("popover")+"</div>":i.data("popover");i.popover({content:a}),t("body").on("click",function(e){i.is(e.target)||0!==i.has(e.target).length||0!==t(".popover").has(e.target).length||i.popover("hide")})})})},"[data-mfp]":function(e){require(["libs/jquery/jquery.magnific-popup.min"],function(){e.each(function(e,n){var i=t(n),a={};i.data("mfpContent")&&(a.items={src:i.data("mfpContent"),type:"inline"}),i.magnificPopup(a)})})},"[data-tooltip]":function(e){require(["libs/bootstrap/bootstrap.min"],function(){e.tooltip(),t(".disabled").click(function(){return!1})})}};return t(function(){t(document).on("click","[data-dyb-popup]",function(){var e=t(this),n=e.data("dybPopup"),i=500,a=670,o=t(window).height()/2-i/2,r=t(window).width()/2-a/2;window.open(n,"share","top="+o+",left="+r+",toolbar=0,status=0,width="+a+",height="+i)}),t(document).on("show.bs.popover",function(e){var a=t(e.target),o=a.data("bs.popover").options,r=o.content;!a.data("dyb.bs.compiled")&&o.html&&(a.data("dyb.bs.compiled",!0),a.data("bs.popover").options.content=n(i,t(r)))})}),function(t){n(i,t)}});